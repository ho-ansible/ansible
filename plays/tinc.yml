#! /usr/bin/env ansible-playbook
# Loop over tinc networks
---

- name: tinc
  tags:
    - vpn
    - tinc
  hosts: tinc_nodes_ho:tinc_nodes_ho1
  tasks:
    - include_role:
        name: tinc
      loop: "{{ vars.keys() | select('search', '^tinc_subnet_') | map('regex_replace', '^tinc_subnet_') | list }}"
      loop_control:
        loop_var: tinc_network
