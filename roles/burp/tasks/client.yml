---

- name: Burp | directories
  tags:
  - dirs
  file:
    path: "{{item}}"
    state: directory
    mode: 0750
  with_items:
  - /etc/burp
  - /etc/burp/keys
  - /etc/burp/upgrade

- name: Burp | dependencies
  tags:
  - package
  package:
    name: librsync-dev
    state: installed

- name: Burp | executables
  tags:
  - bin
  copy:
    src: "sbin/{{item}}"
    dest: /usr/sbin/
    mode: 0755
  with_items:
  - burp
  - burp_ca

- name: Burp | config
  tags:
  - config
  template:
    src: burp.conf.j2
    dest: /etc/burp/burp.conf
    mode: 0640

- name: Burp | cronjob
  tags:
  - cron
  copy:
    src: burp.cron
    dest: /etc/cron.daily/
    mode: 0750
